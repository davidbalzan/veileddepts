[gd_scene load_steps=29 format=3 uid="uid://b8qvxj3yvwxqy"]

[ext_resource type="Script" uid="uid://ci1os4r75yo66" path="res://scripts/core/main.gd" id="1_main"]
[ext_resource type="PackedScene" uid="uid://cf5yywqk0cp05" path="res://assets/models/submarines/uss_seawolf_ssn-21/scene.gltf" id="1_seawolf"]
[ext_resource type="Script" uid="uid://bxpqklmqxolv" path="res://scripts/core/view_manager.gd" id="2_view_manager"]
[ext_resource type="Script" uid="uid://co5k6paec85qe" path="res://scripts/core/simulation_state.gd" id="3_simulation_state"]
[ext_resource type="Script" uid="uid://bonn7y56oylpb" path="res://scripts/core/input_system.gd" id="4_input_system"]
[ext_resource type="Script" uid="uid://cq10dv4xv3w13" path="res://scripts/core/audio_system.gd" id="5_audio_system"]
[ext_resource type="Script" uid="uid://ia5t2g5g8bd0" path="res://scripts/core/sonar_system.gd" id="6_sonar_system"]
[ext_resource type="Script" uid="uid://cdi3xqqu5gv5a" path="res://scripts/views/tactical_map_view.gd" id="7_tactical_map_view"]
[ext_resource type="Script" uid="uid://cnmtxr4ew0gvu" path="res://scripts/views/periscope_view.gd" id="8_periscope_view"]
[ext_resource type="Script" uid="uid://83rgf3sal42u" path="res://scripts/rendering/ocean_renderer.gd" id="9_ocean_renderer"]
[ext_resource type="Script" uid="uid://cc7itej7nfv8i" path="res://scripts/debug/ocean_debug_ui.gd" id="10_ocean_debug_ui"]
[ext_resource type="Script" uid="uid://r666wck4nojq" path="res://scripts/views/external_view.gd" id="11_external_view"]
[ext_resource type="Script" uid="uid://b81t5wehp424s" path="res://scripts/core/fog_of_war_system.gd" id="12_fog_of_war"]
[ext_resource type="Script" uid="uid://buikkaxxcqhyb" path="res://scripts/rendering/atmosphere_renderer.gd" id="13_atmosphere_renderer"]
[ext_resource type="Script" uid="uid://t27fynsyoqw2" path="res://scripts/rendering/terrain_renderer.gd" id="14_terrain_renderer"]
[ext_resource type="Script" uid="uid://c8lam3n4p5q6r" path="res://scripts/rendering/sealife_renderer.gd" id="15_sealife_renderer"]
[ext_resource type="Script" uid="uid://2inuv0bthmxh" path="res://scripts/ai/ai_system.gd" id="16_ai_system"]
[ext_resource type="Script" uid="uid://bp4kve37qijmb" path="res://scripts/debug/submarine_tuning_panel.gd" id="17_tuning_panel"]
[ext_resource type="Script" uid="uid://bqjj5larrsrd4" path="res://scripts/views/whole_map_view.gd" id="18_whole_map_view"]
[ext_resource type="Script" uid="uid://l5fm5543eghj" path="res://scripts/rendering/submarine_wake.gd" id="19_submarine_wake"]
[ext_resource type="Script" uid="uid://ckr2imac1rh84" path="res://scripts/ui/dev_console.gd" id="20_dev_console"]
[ext_resource type="Script" uid="uid://clbyoy0r7m7x1" path="res://scripts/debug/terrain_calibration_panel.gd" id="21_terrain_calibration"]
[ext_resource type="Script" uid="uid://k8uqtj61kgdn" path="res://scripts/rendering/submarine_bubble_trail.gd" id="23_bubble_trail"]
[ext_resource type="Script" path="res://scripts/rendering/weather_system.gd" id="24_weather"]
[ext_resource type="Script" path="res://scripts/rendering/cloud_layer.gd" id="25_cloud_layer"]
[ext_resource type="Script" path="res://scripts/debug/sky_weather_tester.gd" id="26_sky_tester"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_submarine"]
radius = 0.8
height = 20.184448

[sub_resource type="Environment" id="Environment_eb6dy"]
background_mode = 1
ambient_light_source = 2
ambient_light_energy = 0.5

[node name="Main" type="Node"]
script = ExtResource("1_main")

[node name="ViewManager" type="Node" parent="."]
script = ExtResource("2_view_manager")

[node name="SimulationState" type="Node" parent="."]
script = ExtResource("3_simulation_state")

[node name="InputSystem" type="Node" parent="."]
script = ExtResource("4_input_system")

[node name="AudioSystem" type="Node" parent="."]
script = ExtResource("5_audio_system")

[node name="SonarSystem" type="Node" parent="."]
script = ExtResource("6_sonar_system")

[node name="FogOfWarSystem" type="Node" parent="."]
script = ExtResource("12_fog_of_war")

[node name="AISystem" type="Node" parent="."]
script = ExtResource("16_ai_system")

[node name="TacticalMapView" type="CanvasLayer" parent="."]
script = ExtResource("7_tactical_map_view")

[node name="Camera2D" type="Camera2D" parent="TacticalMapView"]
anchor_mode = 0
zoom = Vector2(0.5, 0.5)

[node name="WholeMapView" type="CanvasLayer" parent="."]
layer = 10
visible = false
script = ExtResource("18_whole_map_view")

[node name="PeriscopeView" type="Node3D" parent="."]
visible = false
script = ExtResource("8_periscope_view")

[node name="Camera3D" type="Camera3D" parent="PeriscopeView"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 10, 0)
fov = 60.0
far = 16000.0

[node name="Label3D" type="Label3D" parent="PeriscopeView"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 10, -50)
pixel_size = 0.1
text = "PERISCOPE VIEW
Press 1, 2, 3 to switch views"

[node name="ExternalView" type="Node3D" parent="."]
script = ExtResource("11_external_view")

[node name="Camera3D" type="Camera3D" parent="ExternalView"]
transform = Transform3D(1, 0, 0, 0, 0.939693, 0.34202, 0, -0.34202, 0.939693, 0, 8, -15)
far = 16000.0

[node name="Label3D" type="Label3D" parent="ExternalView"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 60, 0)
pixel_size = 0.1
text = "EXTERNAL VIEW
Press 1, 2, 3 to switch views"

[node name="SubmarineModel" type="RigidBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -10, 0)
axis_lock_angular_z = true
mass = 8000000.0
angular_damp = 0.5

[node name="CollisionShape3D" type="CollisionShape3D" parent="SubmarineModel"]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, 1, 0, -1, -4.371139e-08, 0, 0.9935055, -0.015808105)
shape = SubResource("CapsuleShape3D_submarine")

[node name="SeawolfMesh" parent="SubmarineModel" instance=ExtResource("1_seawolf")]
transform = Transform3D(0, 0, 1.3, 0, 1.3, 0, -1.3, 0, 0, 0, 0, 0)

[node name="OceanRenderer" type="Node3D" parent="." groups=["ocean_renderer"]]
script = ExtResource("9_ocean_renderer")
wind_speed = 30.0
wind_direction_degrees = 45.0

[node name="TerrainRenderer" type="Node3D" parent="." groups=["terrain_renderer"]]
script = ExtResource("14_terrain_renderer")
heightmap_region = Rect2(0.25, 0.3, 0.1, 0.1)

[node name="SealifeRenderer" type="Node3D" parent="."]
script = ExtResource("15_sealife_renderer")

[node name="SubmarineWake" type="Node3D" parent="."]
script = ExtResource("19_submarine_wake")

[node name="SubmarineBubbleTrail" type="Node3D" parent="."]
script = ExtResource("23_bubble_trail")

[node name="AtmosphereRenderer" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_eb6dy")
script = ExtResource("13_atmosphere_renderer")
time_of_day = 14.0
cycle_speed = 0.1

[node name="CloudLayer1" type="MeshInstance3D" parent="AtmosphereRenderer"]
script = ExtResource("25_cloud_layer")
layer_height = 2000.0
coverage = 0.5
speed = 0.02

[node name="CloudLayer2" type="MeshInstance3D" parent="AtmosphereRenderer"]
script = ExtResource("25_cloud_layer")
layer_height = 2500.0
coverage = 0.4
speed = 0.015

[node name="WeatherSystem" type="Node" parent="."]
script = ExtResource("24_weather")
auto_transition = false

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.707107, 0.707107, 0, -0.707107, 0.707107, 0, 50, 0)
light_energy = 1.2

[node name="OceanDebugUI" type="CanvasLayer" parent="."]
script = ExtResource("10_ocean_debug_ui")

[node name="SubmarineTuningPanel" type="CanvasLayer" parent="."]
script = ExtResource("17_tuning_panel")

[node name="TerrainCalibrationPanel" type="CanvasLayer" parent="."]
script = ExtResource("21_terrain_calibration")

[node name="DevConsole" type="CanvasLayer" parent="."]
layer = 10
script = ExtResource("20_dev_console")

[node name="SkyWeatherTester" type="Node" parent="."]
script = ExtResource("26_sky_tester")
